(function(o,n){typeof exports=="object"&&typeof module<"u"?module.exports=n():typeof define=="function"&&define.amd?define(n):(o=typeof globalThis<"u"?globalThis:o||self,o["browser-ex-storage"]=n())})(this,function(){"use strict";const o=s=>{try{return JSON.parse(s)}catch{}return s};return s=>({"chrome-ex":{get(e){return new Promise(r=>{chrome.storage.sync.get(e,t=>{r(t)})})},set(e){return new Promise(r=>{chrome.storage.sync.set(e,()=>{r(void 0)})})},remove(e){return new Promise(r=>{chrome.storage.sync.remove(e,()=>{r(void 0)})})},clear(){return new Promise(e=>{chrome.storage.sync.clear(()=>{e(void 0)})})}},browser:{get(e){return new Promise(r=>{const t=Array.isArray(e)?e:[e];r(t.reduce((c,i)=>(c[i]=o(localStorage.getItem(i)),c),{}))})},set(e){return new Promise(r=>{Object.keys(e).forEach(t=>{localStorage.setItem(t,typeof e[t]=="string"?e[t]:JSON.stringify(e[t]))}),r(void 0)})},remove(e){return new Promise(r=>{localStorage.removeItem(e),r(void 0)})},clear(){return new Promise(e=>{localStorage.clear(),e(void 0)})}}})[s]});
